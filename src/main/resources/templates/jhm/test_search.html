<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{common/head-top :: head-top-fragment}"><title>감자팀</title></head>
<body>
<div th:replace="~{common/head :: head-fragment}"></div>

<main>
    <div class="card-wrapper" th:if="${ffvList != null}" th:each="ffv : ${ffvList}">
        <div class="card" th:attr="data-ffv=${ffv}">
            <div class="card-body">
                <input type="hidden" id="ffvId" th:value="${ffv.ffvId}">
                <input type="hidden" id="origin" th:value="${flight.origin}">
                <input type="hidden" id="destination" th:value="${flight.destination}">
                <input type="hidden" id="departure" th:value="${flight.departure}">
                <input type="hidden" id="comeback" th:value="${flight.comeback}">
                <input type="hidden" id="adults" th:value="${flight.adults}">
                <input type="hidden" id="children" th:value="${flight.children}">
                <input type="hidden" id="infants" th:value="${flight.infants}">
                <input type="hidden" id="memberId" th:value="${memberId}">
                <img class="airlineImg" th:src="${ffv.getApiDurations().get(0).airlineImg}" style="width: 100px; height: 50px;">
                <span th:text="${orgKor}"></span>
                <div class="separator">
                    <span th:text="${#strings.replace(#strings.replace(#strings.substring(ffv.apiDurations.get(0).duration, 2), 'H', '시간'), 'M', '분')}"></span>
                </div>
                <span th:text="${desKor}"></span>
                <span class="flight-price" th:text="${#numbers.formatDecimal(ffv.totalPrice, 0, 'COMMA', 0, 'POINT')}"></span>
                <img th:src="@{/asset/images/downarrow.webp}" class="toggleBtn" value="토글" style="width: 20px; height: 20px; cursor: pointer;">
                <br> <br>
                <div class="tog-body">
                    <div th:each="dur : ${ffv.apiDurations}" class="durContainer">
                        <div class="dv1">
                            <span th:text="${#strings.replace(#strings.replace(#strings.substring(dur.duration, 2), 'H', '시간'), 'M', '분')}"></span>
                        </div>
                        <div class="dv2">
                            <div th:each="seg : ${ffv.apiSegments}" th:if="${seg.depOrComb == dur.depOrComb}" class="segContainer">
                                <div class="seg1">
                                    <div>
                                        <span th:text="${#strings.arraySplit(#strings.substring(seg.departureAt, 0, seg.departureAt.length()-3), 'T')[1]}" class="sgTime"></span> <br>
                                        <span th:text="${#strings.replace(#strings.substring(#strings.arraySplit(#strings.substring(seg.departureAt, 0, seg.departureAt.length()-3), 'T')[0], 5), '-', '월 ')+'일'}" class="sgDay"></span>
                                    </div>
                                    <div class="sg2">
                                        <span th:text="${#strings.replace(#strings.replace(#strings.substring(seg.duration, 2), 'H', '시간'), 'M', '분')}"></span> <br>
                                    </div>
                                    <div>
                                        <span th:text="${#strings.arraySplit(#strings.substring(seg.arrivalAt, 0, seg.arrivalAt.length()-3), 'T')[1]}" class="sgTime"></span> <br>
                                        <span th:text="${#strings.replace(#strings.substring(#strings.arraySplit(#strings.substring(seg.arrivalAt, 0, seg.arrivalAt.length()-3), 'T')[0], 5), '-', '월 ')+'일'}" class="sgDay"></span>
                                    </div>
                                </div>
                                <div class="seg2">
                                    <div>
                                        <span th:text="${seg.departureIata}"></span>
                                    </div>
                                    <div class="sg2">
                                        <span th:text="${seg.carrierCode} + ${seg.carrierNum}"></span> &nbsp;&nbsp;&nbsp;&middot;&nbsp;&nbsp;&nbsp;
                                        <span th:text="${seg.airlineKor} + Airline"></span>
                                    </div>
                                    <div>
                                        <span th:text="${seg.arrivalIata}"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br> <br>
                    <button class="button-style cartBtn">장바구니에 추가</button>
                    <button class="button-style goPayBtn">선택하기</button>
                </div>
            </div>
        </div>
    </div>
    <div th:if="${ffvList.size() == 0}">
        <h3>검색결과 없음</h3>
    </div>
</main>

<div class="tedu-N17" data-bid="fjlxiC75U0">
    <th:block th:replace="~{common/footer :: footer-fragment}"></th:block>
</div>
<link rel="stylesheet" th:href="@{/jhm/jhm.css}">
<script th:src="@{/jhm/jhm.js}"></script>
<th:block th:replace="~{common/footer-down :: footer-js-fragment}"></th:block>
</body>
</html>